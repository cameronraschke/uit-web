<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="stylesheet" href="/css/desktop.css" />
		<link rel="stylesheet" href="/css/inventory.css" />
		<script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/init.js"></script>
		<title>Inventory - ITSC Mgmt</title>
	</head>
	<body>
		<div id="uit-header"></div>
		<script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/header.js"></script>
		
		<div class="flex-container title pagetitle"><h2>Update and View Inventory</h2></div>

		<section id="update-and-search-container" class="flex-container horizontal">
			<div class="flex-container vertical outlined">
				<form id="inventory-lookup-form">
					<div class="flex-container vertical">
						<div class="message"><p id="existing-inventory-message" class="warning-message"></p></div>
						<div class="flex-container horizontal"><div class="flex-container title"><h3>Update Client Information</h3></div></div>
						<div class="flex-container vertical">
							<div class="flex-container horizontal"><p>Tag Number/Serial Number Lookup:</p></div>
							<input type="number" id="inventory-tag-lookup" list="inventory-tag-suggestions"
								class="text-search"
								placeholder="Search Tag Number"
								minlength="6"
								maxlength="6"
								autocomplete="off"
								autocorrect="off"
								autocapitalize="off"
								pattern="[0-9]{6}"
								autofocus
							/>
							<datalist id="inventory-tag-suggestions"></datalist>
							<input type="text" id="inventory-serial-lookup"
								class="text-search"
								placeholder="Search Serial Number"
								minlength="4"
								maxlength="64"
								autocomplete="off"
								autocorrect="off"
								autocapitalize="off"
								pattern="[A-Za-z0-9\-_]{1,64}"
							/>
							<div class="flex-container horizontal">
								<button type="button" id="inventory-lookup-reset-button">Reset Search</button>
								<button type="button" id="inventory-lookup-more-details">More Details</button>
								<button type="submit" id="inventory-lookup-submit-button">Search for Client</button>
							</div>
						</div>
					</div>
				</form>

				<form id="inventory-update-form" enctype="multipart/form-data" method="POST" action="/api/update_inventory">
					<div class="flex-container vertical">
						<div class="message"><p id="existing-inventory-message" class="warning-message"></p></div>
						<div class="message"><p id="last-update-time-message" class="warning-message"></p></div>
						<input type="hidden" id="csrf-token" value="" />
						<div id="inventory-form-container" class="grid-container inventory inventory-update-form">
							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Location</p></div>
								<div class="flex-container vertical">
									<label class="required-field" for="location">Location: </label>
									<datalist id="location-suggestions"></datalist>
									<input type="text" id="location" name="location"
										placeholder="Location"
										maxlength="128"
										autocomplete="off"
										autocorrect="off"
										autocapitalize="on"
										list="location-suggestions" />
								</div>
								<div class="flex-container vertical">
									<label for="building">Building: </label>
									<input type="text" id="building" name="building"
										placeholder="Building"
										maxlength="64"
										autocomplete="off"
										autocorrect="off"
										autocapitalize="on" />
								</div>
								<div class="flex-container vertical">
									<label for="room">Room: </label>
									<input type="text" id="room" name="room"
										placeholder="Room"
										maxlength="64"
										autocomplete="off"
										autocorrect="off"
										autocapitalize="on" />
								</div>
							</div>

							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Hardware Data: </p></div>
								<div class="flex-container vertical">
									<label for="manufacturer">Manufacturer: </label>
									<input type="text" id="system_manufacturer" name="system_manufacturer"
										placeholder="Manufacturer" 
										maxlength="128" 
										autocomplete="off"
										autocorrect="off"
										autocapitalize="on" />
								</div>
								<div class="flex-container vertical">
									<label for="system_model">Model No.: </label>
									<input type="text" id="system_model" name="system_model"
										placeholder="Model" 
										maxlength="128" 
										autocomplete="off"
										autocorrect="off"
										autocapitalize="on" />
								</div>
							</div>

							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Group Ownership:</p></div>
								<div class="flex-container vertical">
									<label class="required-field" for="department_name">Department: </label>
									<select id="department_name" name="department_name"></select>
								</div>
								<div class="flex-container vertical">
									<label for="ad_domain" class="required-field">AD Domain: </label>
									<select id="ad_domain" name="ad_domain"></select>
								</div>
							</div>

							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Property Info:</p></div>
								<div class="flex-container vertical">
									<label for="property_custodian">Property Custodian</label>
									<input type="text" id="property_custodian" name="property_custodian"
										placeholder="Property Custodian" 
										maxlength="64" 
										autocomplete="off"
										autocorrect="off"
										autocapitalize="words" />
								</div>
								<div class="flex-container vertical">
									<label for="acquired_date">Acquired Date</label>
									<input type="date" id="acquired_date" name="acquired_date" />
								</div>
								<div class="flex-container vertical">
									<label for="retired_date">Retired Date</label>
									<input type="date" id="retired_date" name="retired_date" />
								</div>
							</div>


							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Client Health</p></div>
								<div class="flex-container vertical">
									<label for="is_broken">Is it broken?</label>
									<select id="is_broken" name="is_broken">
										<option value="" disabled selected>Is it Broken?</option>
										<option value="true">Yes, it is broken</option>
										<option value="false">No, it isn't broken</option>
										<option value="unknown">Unknown</option>
									</select>
								</div>
								<div class="flex-container vertical">
									<label for="disk_removed">Is the Disk Removed?</label>
									<select id="disk_removed" name="disk_removed"></select>
								</div>
								<div class="flex-container vertical">
									<label for="last_hardware_check">Last Hardware Check</label>
									<input type="datetime-local" id="last_hardware_check" name="last_hardware_check" />
								</div>
							</div>

							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Client Status:</p></div>
								<div class="flex-container vertical">
									<label for="status" class="required-field">Overall Status: </label>
									<select id="status" name="status">
										<option value="" disabled selected>Select Status</option>
									</select>
								</div>
								<div id="print-checkout-container" class="flex-container horizontal"><a id="print-checkout-link"></a></div>
								<div class="flex-container vertical">
									<label for="checkout_date">Checkout Date: </label>
									<input type="date" id="checkout_date" name="checkout_date" value="" />
								</div>
								<div class="flex-container vertical">
									<label for="return_date">Return Date: </label>
									<input type="date" id="return_date" name="return_date" value="" />
								</div>
							</div>

							<div class="flex-container vertical separated">
								<div class="flex-container horizontal"><p>Upload Inventory Image(s):</p></div>
								<div class="flex-container horizontal">
									<input type="file" id="inventory-file-input" name="inventory-file-input" 
										accept="image/jpeg,image/jpg,image/png,video/mp4" 
										multiple />
								</div>
								<div class="flex-container horizontal">
									<a id="client_images_link" href="">View Client Images</a>
								</div>
							</div>

						<!-- Close grid -->
						</div> 

						<div class="flex-container horizontal">
							<label for="note">Notes:</label>
							<textarea id="note" name="note" placeholder="Enter notes..." maxlength="1024" rows="6" cols="50"></textarea>
						</div>

						<div class="flex-container horizontal"><div class="message"><p id="inventory-error" class="error-message"></p></div></div>
						<div class="flex-container horizontal form-buttons" id="inventory-update-form-buttons">
							<button id="inventory-update-cancel-button" name="inventory-update-cancel-button"
								type="button"
								class="cancel">
								Cancel
							</button>
							<button id="inventory-update-submit-button" name="inventory-update-submit-button" 
								type="submit"
								class="submit">
								Submit Inventory Update
							</button>
						</div>
					</div>
				</form>
			</div>

			<div class="flex-container vertical outlined">
				<form id="adv-search-form">
					<div class="flex-container vertical">
						<div class="flex-container vertical"><h3>Advanced Search</h3></div>
						<div class="flex-container vertical">
							<div class="flex-container horizontal">
								<select id="adv-search-location" name="location" form="adv-search-form">
									<option value="" disabled selected>Location</option>
									{{ range $location, $locationReadable := .Locations }}
										<option value="{{ $location }}">{{ $locationReadable }}</option>
									{{ end }}
								</select>
								<a id="adv-search-location-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-department" name="department_name" form="adv-search-form">
									<option value="" disabled selected>Department</option>
								</select>
								<a id="adv-search-department-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-manufacturer" name="manufacturer" form="adv-search-form">
									<option value="" disabled selected>Manufacturer</option>
								</select>
								<a id="adv-search-manufacturer-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-model" name="model" form="adv-search-form">
									<option value="" disabled selected>Model</option>
								</select>
								<a id="adv-search-model-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-ad-domain" name="ad_domain" form="adv-search-form">
									<option value="" disabled selected>AD Domain</option>
									{{ range $domain, $domainReadable := .Domains }}
										<option value="{{ $domain }}">{{ $domainReadable }}</option>
									{{ end }}
								</select>
								<a id="adv-search-ad-domain-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-status" name="status" form="adv-search-form">
									<option value="" disabled selected>Status</option>
									{{ range $status, $statusReadable := .Statuses }}
										<option value="{{ $status }}">{{ $statusReadable }}</option>
									{{ end }}
								</select>
								<a id="adv-search-status-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-is-broken" name="is_broken" form="adv-search-form">
									<option value="" disabled selected>Broken?</option>
									<option value="true">Yes - Is broken</option>
									<option value="false">No - Is functional</option>
								</select>
								<a id="adv-search-is-broken-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal">
								<select id="adv-search-has-images" name="has_images" form="adv-search-form">
									<option value="" disabled selected>Has Images?</option>
									<option value="true">Yes - Has images</option>
									<option value="false">No - Missing images</option>
								</select>
								<a id="adv-search-has-images-reset" class="inventory-search-reset" href="">x</a>
							</div>
							<div class="flex-container horizontal form-buttons">
								<button id="adv-search-form-reset-button" type="button" class="cancel">Reset Search</button>
								<button type="submit" class="submit" id="adv-search-download-csv">Download Results</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</section>

		<section>
			<div class="flex-container vertical">
				<div class="flex-container horizontal">
					<input id="inventory-sort-tagnumber" name="inventory-sort-tagnumber"
						type="text" 
						placeholder="Search tags..."
					/>
					<input id="inventory-sort-serial" name="inventory-sort-serial" 
						type="text" 
						placeholder="Search serial..."
					/>
					<select id="inventory-sort-by">
						<option value="time-desc" selected>Sort by Time (Desc)</option>
						<option value="time-asc">Sort by Time (Asc)</option>
						<option value="tagnumber-asc">Sort by Tag # (Asc)</option>
						<option value="tagnumber-desc">Sort by Tag # (Desc)</option>
						<option value="location-asc">Sort by Location (A-Z)</option>
						<option value="location-desc">Sort by Location (Z-A)</option>
						<option value="manufacturer-asc">Sort by Manufacturer (A-Z)</option>
						<option value="manufacturer-desc">Sort by Manufacturer (Z-A)</option>
						<option value="model-asc">Sort by Model (A-Z)</option>
						<option value="model-desc">Sort by Model (Z-A)</option>
						<option value="department-asc">Sort by Department (A-Z)</option>
						<option value="department-desc">Sort by Department (Z-A)</option>
						<option value="domain-asc">Sort by AD Domain (A-Z)</option>
						<option value="domain-desc">Sort by AD Domain (Z-A)</option>
						<option value="status-asc">Sort by Status (A-Z)</option>
						<option value="status-desc">Sort by Status (Z-A)</option>
					</select>
					<p id="inventory-table-rowcount">0 entries</p>
				</div>
			</div>
			<table id="inventory-table">
				<thead>
					<tr>
						<th class="clickable">Tag</th>
						<th class="clickable">Serial</th>
						<th class="clickable">Location</th>
						<th class="clickable">Manufacturer/Model</th>
						<th class="clickable">Department</th>
						<th class="clickable">AD Domain</th>
						<th class="clickable">Status</th>
						<th>Notes</th>
						<th class="clickable">Last Entry</th>
					</tr>
				</thead>
				<tbody id="inventory-table-body">
					<tr><td colspan="10">Loading inventory...</td></tr>
				</tbody>
			</table>
		</section>

		<div id="uit-footer" class="flex-container footer"></div>
		<script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/footer.js"></script>
		<script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/inventory_table.js"></script>
		<script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/inventory_filters.js"></script>
		<script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/inventory.js"></script>
	</body>
</html>