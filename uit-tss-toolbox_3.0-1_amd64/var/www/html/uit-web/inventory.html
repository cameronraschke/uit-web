<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="/css/desktop.css" />
    <link rel="stylesheet" href="/css/inventory.css" />
    <script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/init.js"></script>
    <title>Inventory - ITSC Mgmt</title>
  </head>
  <body>
    <div id="uit-header"></div>
    <script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/header.js"></script>
    <div><h1>UIT - ITSC Inventory Management</h1></div>
    <div id="main-content"><h2>Update and View Inventory</h2></div>
    <div id="inventory-section" class="flex-container inventory">
      <div class="flex-box inventory">
        <div class="message"><p id="existing-inventory-message" class="warning-message"></p></div>
          <form id="inventory-lookup-form">
            <div class="inventory-lookup-label"><h3>Update Client Information</h3></div>
            <div class="grid-container inventory inventory-lookup-form">
            <div class="inventory-lookup-label"><p>Tag Number/Serial Number Lookup:</p></div>
            <div><p>Search Tag Number:</p></div>
            <div><p>Search Serial Number:</p></div>
              <input type="number" id="inventory-tag-lookup" list="inventory-tag-suggestions"
                placeholder="Enter Tag Number"
                minlength="6"
                maxlength="6"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                pattern="[0-9]{6}"
                autofocus
                />
                <datalist id="inventory-tag-suggestions"></datalist>
                <input type="text" id="inventory-serial-lookup"
                  placeholder="Enter Serial Number"
                  minlength="4"
                  maxlength="64"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  pattern="[A-Za-z0-9\-_]{1,64}"
                  />
              <div>
                <button type="submit" id="inventory-lookup-submit-button">Search for Client</button>
                <button type="reset" id="inventory-lookup-reset-button">Reset Search</button>
                <button type="button" id="client-more-details">More Details</button>
              </div>
            </div>
          </form>
        <div class="vertical-spacer"></div>
        <div id="inventory-update-section">
          <div class="message"><p id="existing-inventory-message" class="warning-message"></p></div>
          <form id="inventory-update-form" enctype="multipart/form-data" method="POST" action="/api/update_inventory">
            <input type="hidden" id="csrf-token" value="" />
            <div class="grid-container inventory inventory-update-form">
              <div class="inventory-lookup-label"><p class="bold">Location, Manufacturer, and Model:</p></div>
              <div><p class="required-field">Location:</p></div>
              <div><p class="required-field">Manufacturer/Model:</p></div>
              <div><input type="text" id="location" name="location"
                placeholder="Location" 
                maxlength="128"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off" /></div>
              <div>
                <input type="text" id="system_manufacturer" name="system_manufacturer"
                  placeholder="Manufacturer" 
                  maxlength="128" 
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off" />
              </div>
              <div></div>
              <div>
                <input type="text" id="system_model" name="system_model"
                  placeholder="Model" 
                  maxlength="128" 
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off" />
              </div>
            </div>
            <div class="vertical-spacer"></div>
            <div class="grid-container inventory inventory-update-form">
              <div class="inventory-lookup-label"><p class="bold">Department and AD Domain:</p></div>
              <div><label for="department" class="required-field">Department:</label></div>
              <div><select id="department" name="department">
                <option value="" disabled selected>Select Department</option>
                <option value="">None</option>
                {{- range $department, $departmentReadable := .Departments }}
                <option value="{{ $department }}">{{ $departmentReadable }}</option>
                {{- end }}
              </select></div>
              <div><label for="domain" class="required-field">AD Domain:</label></div>
              <div><select id="domain" name="domain">
                <option value="" disabled selected>Select AD Domain</option>
                <option value="">None</option>
                {{- range $domain, $domainReadable := .Domains }}
                <option value="{{ $domain }}">{{ $domainReadable }}</option>
                {{- end }}
              </select></div>
            </div>
            <div class="vertical-spacer"></div>
            <div class="grid-container inventory inventory-update-form">
              <div class="inventory-lookup-label"><p class="bold">Health and Status:</p></div>
              <label for="broken" class="required-field">Is it Broken?</label>
              <select id="broken" name="broken">
                <option value="" disabled selected>Is it Broken?</option>
                <option value="true">Yes, it is broken</option>
                <option value="false">No, it isn't broken</option>
              </select>
              <label for="status" class="required-field">Status:</label>
              <select id="status" name="status">
                <option value="" disabled selected>Select Status</option>
                <option value="storage">Storage</option>
                <option value="checked-out">Checked Out</option>
                <option value="needs-repair">Needs Repair</option>
                <option value="retired">Retired</option>
                <option value="lost">Lost</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="vertical-spacer"></div>
            <div>
              <textarea id="note" name="note" placeholder="Enter notes..." maxlength="1024" rows="6" cols="50"></textarea>
            </div>
            <div class="vertical-spacer"></div>
            <div><a id="client_images_link" href="">View Client Images</a></div>
            <div class="vertical-spacer"></div>
            <div><label for="inventory-file-input">Upload Inventory Image(s):</label></div>
            <div><input type="file" id="inventory-file-input" name="inventory-file-input" accept="image/jpeg,image/jpg,image/png,video/mp4" multiple /></div>
            <div class="vertical-spacer"></div>
            <div>
              <input type="submit" id="inventory-update-submit-button" class="submit" value="Submit Inventory Update" />
              <input type="reset" id="inventory-update-cancel-button" class="cancel" value="Cancel" />
            </div>
            <div class="message"><p id="inventory-error" class="error-message"></p></div>
          </form>
        </div>
      </div>

      <div class="flex-box inventory">
        <form id="inventory-filter-form">
          <div class="inventory-lookup-label"><h3>Advanced Search</h3></div>
          <input type="text" id="inventory-filter-tagnumber" name="tagnumber"
            form="inventory-filter-form"
            placeholder="Tag Number"
            minlength="0"
            maxlength="6"
            pattern="[0-9]{6}" /></div>
          <input type="text" id="inventory-filter-serial" name="serial"
            form="inventory-filter-form"
            placeholder="Serial Number"
            minlength="0"
            maxlength="64"
            pattern="[A-Za-z0-9\-_]{1,64}" />
          <select id="inventory-filter-location" name="location" form="inventory-filter-form"></select>
          <select id="inventory-filter-department" name="department" form="inventory-filter-form"></select>
          <select id="inventory-filter-manufacturer" name="manufacturer" form="inventory-filter-form"></select>
          <select id="inventory-filter-model" name="model" form="inventory-filter-form"></select>
          <select id="inventory-filter-domain" name="domain" form="inventory-filter-form"></select>
          <select id="inventory-filter-status" name="status" form="inventory-filter-form"></select>
          <select id="inventory-filter-broken" name="broken" form="inventory-filter-form"></select>
          <select id="inventory-filter-has_images" name="has_images" form="inventory-filter-form">
            <option value="" selected>Has Images?</option>
            <option value="true">Yes</option>
            <option value="false">No</option>
          </select>
          <button type="submit" id="inventory-submit-button">Reset Search</button>
          <button type="reset" id="inventory-reset-button">Reset Search</button>
        </form>
      </div>
    </div>

    <section>
      <div id="inventory-filter-container">
        <input id="inventory-filter" type="text" placeholder="Filter inventory...">
      </div>
      <table id="inventory-table">
        <thead>
          <tr>
            <th>Tag</th>
            <th>Serial</th>
            <th>Location</th>
            <th>Manufacturer/Model</th>
            <th>Department</th>
            <th>AD Domain</th>
            <th>Status</th>
            <th>Broken?</th>
            <th>Notes</th>
            <th>Last Entry</th>
          </tr>
        </thead>
        <tbody id="inventory-table-body">
          <tr><td colspan="10">Loading inventory...</td></tr>
        </tbody>
      </table>

    </section>

    <div id="uit-footer" class="flex-container footer"></div>
    <script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/footer.js"></script>
    <script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/inventory_table.js"></script>
    <script nonce="{{ .JsNonce }}" type="text/javascript" src="/js/inventory.js"></script>
  </body>
</html>